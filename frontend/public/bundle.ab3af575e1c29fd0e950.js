(()=>{"use strict";const t=class{constructor(t){this.params=t}setTitle(t){document.title=t}async getHtml(){return""}async routine(){}},e=class extends t{constructor(t){super(t),this.setTitle("Dashboard")}async getHtml(){return'\n            <h1>Welcome back, Dom</h1>\n            <p>\n                Fugiat voluptate et nisi Lorem cillum anim sit do eiusmod occaecat irure do. Reprehenderit anim fugiat sint exercitation consequat. Sit anim laborum sit amet Lorem adipisicing ullamco duis. Anim in do magna ea pariatur et.\n            </p>\n            <p>\n                <a href="/posts" data-link>View recent posts</a>.\n            </p>\n        '}};const n=class extends t{constructor(t){super(t),this.setTitle("ShowAll")}async getHtml(){var t,e;return"/all",t=this.showAll,(e=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&t(JSON.parse(e.responseText))},e.open("GET","/all",!0),e.send(),"\n            <h1>All of the notes</h1>\n        "}showAll(t){console.log(t);let e="";t.forEach((t=>{e+="<div><br>",e+=t.id+"   ",e+=t.title+"<br>",e+=t.body+"<br>",e+="</div>"})),document.querySelector("#app").innerHTML=e}};class s extends t{constructor(t){super(t),this.setTitle("Settings")}async getHtml(){return'\n        <h2 class="text-center">Create note</h2>\n        <form id="create-note-form"><br>\n          <input pattern="[A-Za-z]{3}" required size="100" name="title" type="text" class="" placeholder="Title"><br>\n          <textarea required cols="100" name="note" class="" placeholder="Note..." id="exampleFormControlTextarea1" rows="10"></textarea><br>\n          <input required size="100" name="tags" type="text" class="" placeholder="Tags"><br>\n          <input required size="100" name="links" type="text" class="" placeholder="Links"><br>\n          <input required id="submit-btn" type="submit" value="Submit">\n        </form>\n      '}async routine(){document.getElementById("submit-btn").addEventListener("click",s.submit_form)}static submit_form(t){t.preventDefault(),function(t,e,n,s=(()=>{})){let a=document.getElementById(t),r=new FormData(a),o={};r.forEach(((t,e)=>o[e]=t)),function(t,e,n,s){const a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(200==a.status?n(JSON.parse(a.responseText)):s(JSON.parse(a.statusText)))},a.open("POST",e),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))}(o,e,n,s)}("create-note-form","/create",(t=>{console.log(t)}))}}const a=class extends t{constructor(t){super(t),this.postId=t.id,this.setTitle("Viewing Post")}async getHtml(){return`\n            <h1>Post ${this.postId}</h1>\n            <p>You are viewing post #${this.postId}.</p>\n        `}},r=t=>{const e=t.result.slice(1),n=Array.from(t.route.path.matchAll(/:(\w+)/g)).map((t=>t[1]));return Object.fromEntries(n.map(((t,n)=>[t,e[n]]))),Object.fromEntries(n.map(((t,n)=>[t,e[n]])))},o=async()=>{const t=[{path:"/",view:e},{path:"/show_all",view:n},{path:"/create_note",view:s},{path:"/posts/:id",view:a}];let o=t.map((t=>{return{route:t,result:location.pathname.match((e=t.path,new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var e})).find((t=>null!==t.result));o||(o={route:t[0],result:[location.pathname]}),r(o);const i=new o.route.view(r(o));document.querySelector("#app").innerHTML=await i.getHtml(),await i.routine()};window.addEventListener("popstate",o),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{var e;t.target.matches("[data-link]")&&(t.preventDefault(),e=t.target.href,history.pushState(null,null,e),o())})),o()}))})();